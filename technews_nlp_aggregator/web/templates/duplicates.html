<!DOCTYPE html>
<html lang="en">
<head>
{% include 'header_files.html' %}

    <meta charset="UTF-8">
    <title>Similar Articles</title>

</head>
<body onload="select_header('topnav_duplicated')">
{% include 'header.html' %}
<div class="buttonrow" >
<form action="/filterduplicates" method="POST" class="tooltip">
   <input id="searchCriteria" name = "filterCriteria" type="text" class="buttoncolumn" placeholder="Filter criteria"
          value="{{filter_criteria}}"
          title="Type in a Filter criteria" size="50" maxWidth="100" >   <input class="buttoncolumn" type="submit" value="Filter" />
    <span class="tooltiptext">
        <P><I>Example: P_SCORE > 0.6 OR U_SCORE > 0.5 </I></P>
        <P> U_SCORE is the similarity score assigned by the aministrator, P_SCORE is the similarity score assigned by the algorithm</P>
    </span>
</form>
</div>


<table>

  <tr>
    <th class="date">Date 1</th>
    <th><span>Article 1</span></th>
    <th class="date">Date 2</th>

    <th>Article 2</th>
    <th>Admin</th>
    <th>Prob.</th>
    <th>Clas.</th>


    <th class="icon">Compare</th>


  </tr>

    {% for _ in dup_articles: %}
        {% if _.SOURCE_1 != _.SOURCE_2: %}
        <tr>

            <td class="date">{{_.DATE_1}}</td>
            <td><B>{{_.SOURCE_1}}: </B><A HREF="{{_.URL_1}}">{{_.TITLE_1}}</A></td>
            <td class="date">{{_.DATE_2}}</td>
            <td><B>{{_.SOURCE_2}}: </B><A HREF="{{_.URL_2}}">{{_.TITLE_2}}</A></td>
            <td >
              <span id="samestory_{{_.ID_1}}_{{_.ID_2}}" >
                {% if _.U_SCORE > 0: %}
                    {{_.U_SCORE}}
                {% else %}
                  {% if session['signed_in'] %}
                     <div class="buttonrow">
                        <button class="buttoncolumn btn-small green"  onclick="send_same_story('samestory_xhr','{{_.ID_1}}', '{{_.ID_2}}', 'samestory_{{_.ID_1}}_{{_.ID_2}}' );">Y
                        </button>
                        <button class="buttoncolumn btn-small yellow" onclick="send_same_story('related_xhr', '{{_.ID_1}}', '{{_.ID_2}}', 'samestory_{{_.ID_1}}_{{_.ID_2}}');">A
                        </button>

                        <button class="buttoncolumn btn-small red"  onclick="send_same_story('unrelated_xhr', '{{_.ID_1}}', '{{_.ID_2}}', 'samestory_{{_.ID_1}}_{{_.ID_2}}');">N

                        </button>
                     </div>
                  {% endif %}
                {% endif %}
              </span>
            </td>

            <td> {{'%0.3f'| format(_.P_SCORE|float)}}</td>
            <td>{{_.C_SCORE}}</td>


            <td class="icon">
                {% if _.ID_1 != _.ID_2: %}
                    <A HREF="/compare/{{_.ID_1}}/{{_.ID_2}}" target="_blank">
                        <IMG SRC="{{ url_for('static', filename='images/compare_analyze.jpg') }}" ALT="Compare">
                    </A>
                {% endif %}
            </td>

        </tr>
        {% endif %}

    {% endfor %}
</table>
<BR>
<div class="buttonrow">
        {% if page_id and page_id > 0: %}
            <form class="buttoncolumn" action="/duplicates/{{page_id-1}}">
                <input class="main" type="submit" value="<<< Back" />
            </form>
        {% endif %}
        {% if has_next : %}
            <form class="buttoncolumn" action="/duplicates/{{page_id+1}}">
                <input class="main" type="submit" value="Forward >>> " />
            </form>
        {% endif %}


</div>
 <div>
   Page : <B>{{page_id | default(0) }}</B>
    </div>
    <BR>

{% include 'footer.html' %}
</body>


</html>